package pl.edu.pw.tele.enigma;

import java.util.ArrayList;
import java.util.logging.Logger;

/**
 * Klasa reprezentuj¹ca wszystkie elementy Enigmy.<br>
 * Reprezentuje maszynê enigma<br>
 * Wzorzec singleton
 * 
 * @author Lukasz
 * 
 */
public final class Enigma implements EnigmaInterface {

	{
		alphabet = new char[] { 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I',
				'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U',
				'V', 'W', 'X', 'Y', 'Z' };
	}

	/**
	 * <b>LOG4J</b>
	 */
	Logger log = Logger.getLogger(Enigma.class.getName());

	/**
	 * Signleton instance
	 */
	private static volatile Enigma instance = null;
	protected char[] alphabet = null;
	protected Reflector reflector = null;
	Rotor rotor1;
	Rotor rotor2;
	Rotor rotor3;

	public Reflector getReflector() {
		return reflector;
	}

	public void setReflector(Reflector reflector) {
		this.reflector = reflector;
	}




	public Rotor getRotor1() {
		return rotor1;
	}

	public void setRotor1(Rotor rotor1) {
		this.rotor1 = rotor1;
	}

	public Rotor getRotor2() {
		return rotor2;
	}

	public void setRotor2(Rotor rotor2) {
		this.rotor2 = rotor2;
	}

	public Rotor getRotor3() {
		return rotor3;
	}

	public void setRotor3(Rotor rotor3) {
		this.rotor3 = rotor3;
	}

	/**
	 * <b>Metoda wzorca typu singleton. Chcemy mieæ tylko i wy³¹cznie jeden
	 * obiekt Enigmy. <br>
	 * </b>
	 * 
	 * @return <br>
	 *         instancja Enigmy</b>
	 */
	public static Enigma getInstance() {
		if (instance == null) {
			synchronized (Enigma.class) {
				if (instance == null) {
					instance = new Enigma();
				}
			}
		}
		return instance;
	}

	/**
	 * Zabezpieczenie na tworzenie nowych instacji Enigmy
	 */
	private Enigma() {

	}

	public char[] getAlphabet() {
		return alphabet;
	}

	public void setAlphabet(char[] alphabet) {
		this.alphabet = alphabet;

	}

	@Override
	public void createReflector(String s) {
		log.info("Reflector.createReflector");
		reflector = new Reflector(s);

	}

	@Override
	public void createRotors(int i) {
		if (i < 1)
			return;
		else
			rotors = new ArrayList<Rotor>(i);
	}

	@Override
	public void setRotor(int i, String s) {
		rotors.set(i, new Rotor(s));
	}
}
